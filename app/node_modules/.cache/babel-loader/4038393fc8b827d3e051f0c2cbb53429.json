{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseTransaction = void 0;\n\nvar common_1 = __importStar(require(\"@ethereumjs/common\"));\n\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\n\nvar types_1 = require(\"./types\");\n/**\n * This base class will likely be subject to further\n * refactoring along the introduction of additional tx types\n * on the Ethereum network.\n *\n * It is therefore not recommended to use directly.\n */\n\n\nvar BaseTransaction =\n/** @class */\nfunction () {\n  function BaseTransaction(txData) {\n    this.cache = {\n      hash: undefined,\n      dataFee: undefined\n    };\n    /**\n     * List of tx type defining EIPs,\n     * e.g. 1559 (fee market) and 2930 (access lists)\n     * for FeeMarketEIP1559Transaction objects\n     */\n\n    this.activeCapabilities = [];\n    /**\n     * The default chain the tx falls back to if no Common\n     * is provided and if the chain can't be derived from\n     * a passed in chainId (only EIP-2718 typed txs) or\n     * EIP-155 signature (legacy txs).\n     *\n     * @hidden\n     */\n\n    this.DEFAULT_CHAIN = common_1.Chain.Mainnet;\n    /**\n     * The default HF if the tx type is active on that HF\n     * or the first greater HF where the tx is active.\n     *\n     * @hidden\n     */\n\n    this.DEFAULT_HARDFORK = common_1.Hardfork.Istanbul;\n    var nonce = txData.nonce,\n        gasLimit = txData.gasLimit,\n        to = txData.to,\n        value = txData.value,\n        data = txData.data,\n        v = txData.v,\n        r = txData.r,\n        s = txData.s,\n        type = txData.type;\n    this._type = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(type)).toNumber();\n    var toB = (0, ethereumjs_util_1.toBuffer)(to === '' ? '0x' : to);\n    var vB = (0, ethereumjs_util_1.toBuffer)(v === '' ? '0x' : v);\n    var rB = (0, ethereumjs_util_1.toBuffer)(r === '' ? '0x' : r);\n    var sB = (0, ethereumjs_util_1.toBuffer)(s === '' ? '0x' : s);\n    this.nonce = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(nonce === '' ? '0x' : nonce));\n    this.gasLimit = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(gasLimit === '' ? '0x' : gasLimit));\n    this.to = toB.length > 0 ? new ethereumjs_util_1.Address(toB) : undefined;\n    this.value = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(value === '' ? '0x' : value));\n    this.data = (0, ethereumjs_util_1.toBuffer)(data === '' ? '0x' : data);\n    this.v = vB.length > 0 ? new ethereumjs_util_1.BN(vB) : undefined;\n    this.r = rB.length > 0 ? new ethereumjs_util_1.BN(rB) : undefined;\n    this.s = sB.length > 0 ? new ethereumjs_util_1.BN(sB) : undefined;\n\n    this._validateCannotExceedMaxInteger({\n      value: this.value,\n      r: this.r,\n      s: this.s\n    }); // geth limits gasLimit to 2^64-1\n\n\n    this._validateCannotExceedMaxInteger({\n      gasLimit: this.gasLimit\n    }, 64); // EIP-2681 limits nonce to 2^64-1 (cannot equal 2^64-1)\n\n\n    this._validateCannotExceedMaxInteger({\n      nonce: this.nonce\n    }, 64, true);\n  }\n\n  Object.defineProperty(BaseTransaction.prototype, \"transactionType\", {\n    /**\n     * Alias for {@link BaseTransaction.type}\n     *\n     * @deprecated Use `type` instead\n     */\n    get: function () {\n      return this.type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(BaseTransaction.prototype, \"type\", {\n    /**\n     * Returns the transaction type.\n     *\n     * Note: legacy txs will return tx type `0`.\n     */\n    get: function () {\n      return this._type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Checks if a tx type defining capability is active\n   * on a tx, for example the EIP-1559 fee market mechanism\n   * or the EIP-2930 access list feature.\n   *\n   * Note that this is different from the tx type itself,\n   * so EIP-2930 access lists can very well be active\n   * on an EIP-1559 tx for example.\n   *\n   * This method can be useful for feature checks if the\n   * tx type is unknown (e.g. when instantiated with\n   * the tx factory).\n   *\n   * See `Capabilites` in the `types` module for a reference\n   * on all supported capabilities.\n   */\n\n  BaseTransaction.prototype.supports = function (capability) {\n    return this.activeCapabilities.includes(capability);\n  };\n\n  BaseTransaction.prototype.validate = function (stringError) {\n    if (stringError === void 0) {\n      stringError = false;\n    }\n\n    var errors = [];\n\n    if (this.getBaseFee().gt(this.gasLimit)) {\n      errors.push(\"gasLimit is too low. given \".concat(this.gasLimit, \", need at least \").concat(this.getBaseFee()));\n    }\n\n    if (this.isSigned() && !this.verifySignature()) {\n      errors.push('Invalid Signature');\n    }\n\n    return stringError ? errors : errors.length === 0;\n  };\n  /**\n   * The minimum amount of gas the tx must have (DataFee + TxFee + Creation Fee)\n   */\n\n\n  BaseTransaction.prototype.getBaseFee = function () {\n    var fee = this.getDataFee().addn(this.common.param('gasPrices', 'tx'));\n\n    if (this.common.gteHardfork('homestead') && this.toCreationAddress()) {\n      fee.iaddn(this.common.param('gasPrices', 'txCreation'));\n    }\n\n    return fee;\n  };\n  /**\n   * The amount of gas paid for the data in this tx\n   */\n\n\n  BaseTransaction.prototype.getDataFee = function () {\n    var txDataZero = this.common.param('gasPrices', 'txDataZero');\n    var txDataNonZero = this.common.param('gasPrices', 'txDataNonZero');\n    var cost = 0;\n\n    for (var i = 0; i < this.data.length; i++) {\n      this.data[i] === 0 ? cost += txDataZero : cost += txDataNonZero;\n    }\n\n    cost = new ethereumjs_util_1.BN(cost);\n\n    if ((this.to === undefined || this.to === null) && this.common.isActivatedEIP(3860)) {\n      var dataLength = Math.ceil(this.data.length / 32);\n      var initCodeCost = new ethereumjs_util_1.BN(this.common.param('gasPrices', 'initCodeWordCost')).imuln(dataLength);\n      cost.iadd(initCodeCost);\n    }\n\n    return cost;\n  };\n  /**\n   * If the tx's `to` is to the creation address\n   */\n\n\n  BaseTransaction.prototype.toCreationAddress = function () {\n    return this.to === undefined || this.to.buf.length === 0;\n  };\n\n  BaseTransaction.prototype.isSigned = function () {\n    var _a = this,\n        v = _a.v,\n        r = _a.r,\n        s = _a.s;\n\n    if (this.type === 0) {\n      if (!v || !r || !s) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      if (v === undefined || !r || !s) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  };\n  /**\n   * Determines if the signature is valid\n   */\n\n\n  BaseTransaction.prototype.verifySignature = function () {\n    try {\n      // Main signature verification is done in `getSenderPublicKey()`\n      var publicKey = this.getSenderPublicKey();\n      return (0, ethereumjs_util_1.unpadBuffer)(publicKey).length !== 0;\n    } catch (e) {\n      return false;\n    }\n  };\n  /**\n   * Returns the sender's address\n   */\n\n\n  BaseTransaction.prototype.getSenderAddress = function () {\n    return new ethereumjs_util_1.Address((0, ethereumjs_util_1.publicToAddress)(this.getSenderPublicKey()));\n  };\n  /**\n   * Signs a transaction.\n   *\n   * Note that the signed tx is returned as a new object,\n   * use as follows:\n   * ```javascript\n   * const signedTx = tx.sign(privateKey)\n   * ```\n   */\n\n\n  BaseTransaction.prototype.sign = function (privateKey) {\n    if (privateKey.length !== 32) {\n      var msg = this._errorMsg('Private key must be 32 bytes in length.');\n\n      throw new Error(msg);\n    } // Hack for the constellation that we have got a legacy tx after spuriousDragon with a non-EIP155 conforming signature\n    // and want to recreate a signature (where EIP155 should be applied)\n    // Leaving this hack lets the legacy.spec.ts -> sign(), verifySignature() test fail\n    // 2021-06-23\n\n\n    var hackApplied = false;\n\n    if (this.type === 0 && this.common.gteHardfork('spuriousDragon') && !this.supports(types_1.Capability.EIP155ReplayProtection)) {\n      this.activeCapabilities.push(types_1.Capability.EIP155ReplayProtection);\n      hackApplied = true;\n    }\n\n    var msgHash = this.getMessageToSign(true);\n\n    var _a = (0, ethereumjs_util_1.ecsign)(msgHash, privateKey),\n        v = _a.v,\n        r = _a.r,\n        s = _a.s;\n\n    var tx = this._processSignature(v, r, s); // Hack part 2\n\n\n    if (hackApplied) {\n      var index = this.activeCapabilities.indexOf(types_1.Capability.EIP155ReplayProtection);\n\n      if (index > -1) {\n        this.activeCapabilities.splice(index, 1);\n      }\n    }\n\n    return tx;\n  };\n  /**\n   * Does chain ID checks on common and returns a common\n   * to be used on instantiation\n   * @hidden\n   *\n   * @param common - {@link Common} instance from tx options\n   * @param chainId - Chain ID from tx options (typed txs) or signature (legacy tx)\n   */\n\n\n  BaseTransaction.prototype._getCommon = function (common, chainId) {\n    var _a; // Chain ID provided\n\n\n    if (chainId) {\n      var chainIdBN = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(chainId));\n\n      if (common) {\n        if (!common.chainIdBN().eq(chainIdBN)) {\n          var msg = this._errorMsg('The chain ID does not match the chain ID of Common');\n\n          throw new Error(msg);\n        } // Common provided, chain ID does match\n        // -> Return provided Common\n\n\n        return common.copy();\n      } else {\n        if (common_1.default.isSupportedChainId(chainIdBN)) {\n          // No Common, chain ID supported by Common\n          // -> Instantiate Common with chain ID\n          return new common_1.default({\n            chain: chainIdBN,\n            hardfork: this.DEFAULT_HARDFORK\n          });\n        } else {\n          // No Common, chain ID not supported by Common\n          // -> Instantiate custom Common derived from DEFAULT_CHAIN\n          return common_1.default.forCustomChain(this.DEFAULT_CHAIN, {\n            name: 'custom-chain',\n            networkId: chainIdBN,\n            chainId: chainIdBN\n          }, this.DEFAULT_HARDFORK);\n        }\n      }\n    } else {\n      // No chain ID provided\n      // -> return Common provided or create new default Common\n      return (_a = common === null || common === void 0 ? void 0 : common.copy()) !== null && _a !== void 0 ? _a : new common_1.default({\n        chain: this.DEFAULT_CHAIN,\n        hardfork: this.DEFAULT_HARDFORK\n      });\n    }\n  };\n  /**\n   * Validates that an object with BN values cannot exceed the specified bit limit.\n   * @param values Object containing string keys and BN values\n   * @param bits Number of bits to check (64 or 256)\n   * @param cannotEqual Pass true if the number also cannot equal one less the maximum value\n   */\n\n\n  BaseTransaction.prototype._validateCannotExceedMaxInteger = function (values, bits, cannotEqual) {\n    var e_1, _a;\n\n    if (bits === void 0) {\n      bits = 256;\n    }\n\n    if (cannotEqual === void 0) {\n      cannotEqual = false;\n    }\n\n    try {\n      for (var _b = __values(Object.entries(values)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = __read(_c.value, 2),\n            key = _d[0],\n            value = _d[1];\n\n        switch (bits) {\n          case 64:\n            if (cannotEqual) {\n              if (value === null || value === void 0 ? void 0 : value.gte(ethereumjs_util_1.MAX_UINT64)) {\n                var msg = this._errorMsg(\"\".concat(key, \" cannot equal or exceed MAX_UINT64 (2^64-1), given \").concat(value));\n\n                throw new Error(msg);\n              }\n            } else {\n              if (value === null || value === void 0 ? void 0 : value.gt(ethereumjs_util_1.MAX_UINT64)) {\n                var msg = this._errorMsg(\"\".concat(key, \" cannot exceed MAX_UINT64 (2^64-1), given \").concat(value));\n\n                throw new Error(msg);\n              }\n            }\n\n            break;\n\n          case 256:\n            if (cannotEqual) {\n              if (value === null || value === void 0 ? void 0 : value.gte(ethereumjs_util_1.MAX_INTEGER)) {\n                var msg = this._errorMsg(\"\".concat(key, \" cannot equal or exceed MAX_INTEGER (2^256-1), given \").concat(value));\n\n                throw new Error(msg);\n              }\n            } else {\n              if (value === null || value === void 0 ? void 0 : value.gt(ethereumjs_util_1.MAX_INTEGER)) {\n                var msg = this._errorMsg(\"\".concat(key, \" cannot exceed MAX_INTEGER (2^256-1), given \").concat(value));\n\n                throw new Error(msg);\n              }\n            }\n\n            break;\n\n          default:\n            {\n              var msg = this._errorMsg('unimplemented bits value');\n\n              throw new Error(msg);\n            }\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  /**\n   * Returns the shared error postfix part for _error() method\n   * tx type implementations.\n   */\n\n\n  BaseTransaction.prototype._getSharedErrorPostfix = function () {\n    var hash = '';\n\n    try {\n      hash = this.isSigned() ? (0, ethereumjs_util_1.bufferToHex)(this.hash()) : 'not available (unsigned)';\n    } catch (e) {\n      hash = 'error';\n    }\n\n    var isSigned = '';\n\n    try {\n      isSigned = this.isSigned().toString();\n    } catch (e) {\n      hash = 'error';\n    }\n\n    var hf = '';\n\n    try {\n      hf = this.common.hardfork();\n    } catch (e) {\n      hf = 'error';\n    }\n\n    var postfix = \"tx type=\".concat(this.type, \" hash=\").concat(hash, \" nonce=\").concat(this.nonce, \" value=\").concat(this.value, \" \");\n    postfix += \"signed=\".concat(isSigned, \" hf=\").concat(hf);\n    return postfix;\n  };\n\n  return BaseTransaction;\n}();\n\nexports.BaseTransaction = BaseTransaction;","map":{"version":3,"mappings":"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","names":["txData","hash","undefined","dataFee","common_1","Mainnet","Istanbul","gasLimit","to","value","data","v","r","s","type","_type","ethereumjs_util_1","toNumber","toB","vB","rB","sB","nonce","length","_validateCannotExceedMaxInteger","Object","BaseTransaction","capability","activeCapabilities","includes","stringError","errors","getBaseFee","gt","push","concat","isSigned","verifySignature","fee","getDataFee","addn","common","param","gteHardfork","toCreationAddress","iaddn","txDataZero","txDataNonZero","cost","i","isActivatedEIP","dataLength","Math","ceil","initCodeCost","imuln","iadd","buf","publicKey","getSenderPublicKey","e","privateKey","msg","_errorMsg","Error","hackApplied","supports","types_1","EIP155ReplayProtection","msgHash","getMessageToSign","tx","_processSignature","index","indexOf","splice","chainId","chainIdBN","eq","copy","isSupportedChainId","chain","hardfork","DEFAULT_HARDFORK","forCustomChain","DEFAULT_CHAIN","name","networkId","_a","values","bits","cannotEqual","entries","_c","key","gte","toString","hf","postfix","exports"],"sourceRoot":"","sources":["../src/baseTransaction.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}